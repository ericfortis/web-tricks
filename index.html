<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width" name="viewport">
	<link href="favicon.svg" rel="icon" type="image/svg+xml">
	<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/atom-one-light.min.css" integrity="sha512-o5v54Kh5PH0dgnf9ei0L+vMRsbm5fvIvnR/XkrZZjN4mqdaeH7PW66tumBoQVIaKNVrLCZiBEfHzRY4JJSMK/Q==" referrerpolicy="no-referrer" rel="stylesheet" />
	<link href="./mui-ripple.css" rel="stylesheet">
	<link href="./mui-input.css" rel="stylesheet">
	<link href="./pulse-on-change.css" rel="stylesheet">
	<title>Web Frontend Tricks by Eric Fortis</title>
	<style>
		:root {
			--accent: dodgerblue;
			--boxShadowIndex1: 0 1px 3px 0 rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14), 0 2px 1px -1px rgba(0, 0, 0, 0.12);
		}
		html,
		body {
			width: 90%;
			max-width: 960px;
			margin: 0 auto;
			font-family: Avenir Next, system-ui, sans-serif;
			font-size: 16px;
			scroll-behavior: smooth;
		}
		ul li {
			line-height: 2;
		}
		h2 {
			margin-top: 6rem;
			position: relative;
			left: -5px;
			padding: 5px 0 5px 5px;
			border-radius: 10px;
		}

		a {
			color: var(--accent);
			text-decoration: none;
		}
		a:hover {
			text-decoration: underline;
		}
		a[href^="#"]::after {
			display: inline-block;
			margin-left: 3px;
			color: #af85bb;
			content: '↴';
			transform: scale(.8) translateY(2px);
		}

		button {
			padding: 8px;
			color: white;
			background: var(--accent);
			border-radius: 6px;
			cursor: pointer;
		}
		button:active {
			cursor: grabbing;
		}

		output {
			padding: 0 6px;
		}

		pre {
			font-size: .8rem;
			tab-size: 2;
		}
		pre code {
			border-radius: 14px;
			box-shadow: var(--boxShadowIndex1);
		}
		footer {
			padding: 20px 0;
			margin-top: 9rem;
			color: #999;
		}

		.hljs-selector-class {
			color: #a626a4
		}
		.hljs-attribute {
			color: #4078f2
		}
		.hljs-return {
			padding-right: 4px;
			padding-bottom: 1px;
			padding-left: 8px;
			background: #a626a4;
			border-bottom-left-radius: 10px;
			border-top-left-radius: 10px;
			color: white;
		}
	</style>
</head>
<body>

<h1>Web Frontend Tricks</h1>
<p>
	Tips and tricks for web front-end development.
</p>

<ul id="toc"></ul>


<h2 id="-pulse-on-change">Pulse on change</h2>
<input size="3" type="text" id="numA" value="1" />&nbsp;+
<input size="3" type="text" id="numB" value="2" />&nbsp;&nbsp;&nbsp;=
<output for="numA numB" id="outputAB">3</output>
<pre id="pulse-on-change.css"></pre>
<pre id="pulse-on-change.js"></pre>


<h2 id="-css-mui-input-animation">CSS-only Material UI Input Animation</h2>
<input class="muiInput" placeholder="Click me" />
<pre id="mui-input.css"></pre>


<h2 id="-css-mui-ripple">CSS-only Material UI Ripple</h2>
<button autofocus class="ripple" type="button">Focus</button>
<pre id="mui-ripple.css"></pre>


<h2 id="-play-note">Play Note</h2>
<button class="ripple" onclick="playNote()" type="button">Play Note</button>
<pre id="play-note.js"></pre>


<h2 id="-email-obfuscator">Email Deobfuscator</h2>
<a id="EmailLink">Contact</a>
<pre id="email-deobfuscator.js"></pre>


<h2 id="-rel-noopener">Auto-inject rel="noopener" to anchors</h2>
<pre id="rel-noopener.js"></pre>


<h2 id="-feature-detection">Feature Detection</h2>
<pre id="feature-detection.js"></pre>


<h2 id="-form-data-to-json">Form Data to JSON</h2>
<pre id="form-data-to-json.js"></pre>


<h2 id="-fetch-with-retry">Fetch with Retry</h2>
<pre id="fetch-with-retry.js"></pre>


<h2 id="-more">More…</h2>
<ul>
	<li>
		<a href="https://ericfortis.github.io/web-animations/" target="_blank">Web Animations</a>
	</li>
	<li>
		<a href="https://blog.uidrafter.com" target="_blank">Blog Posts</a>
	</li>
</ul>


<footer>
	&copy; 2022 Eric Fortis
	<br>
	<a href="https://twitter.com/efortis">@efortis</a>
</footer>


<script>
	window.addEventListener('load', function () {
		/* Build Table of Contents */
		for (const h2 of document.querySelectorAll('h2[id^="-"]')) {
			const li = document.createElement('li')
			const a = document.createElement('a')
			a.href = '#' + h2.id
			a.innerText = h2.innerText
			li.append(a)
			document.getElementById('toc').append(li)
		}


		/* Inject and Style Code Snippets */
		const allSnippets = document.querySelectorAll('pre')
		const nSnippets = allSnippets.length
		let nLoadedSnippets = 0
		for (let i = 0; i < nSnippets; i++) {
			const snippet = allSnippets[i]
			const filename = snippet.id
			if (filename) {
				const code = document.createElement('code')
				if (filename.endsWith('.js'))
					code.className = 'language-javascript'
				else if (filename.endsWith('.css'))
					code.className = 'language-css'

				snippet.append(code)
				readFromGithub(code, filename)
					.then(() => { // Otherwise, the vertical offset wouldn't account for the snippets height
						if (nSnippets === ++nLoadedSnippets)
							flashHighlightWhenScrollingToFragments()
					})
			}
		}

		function readFromGithub(targetEl, file) {
			// return fetch(`./${file}`)
			return fetch(`https://raw.githubusercontent.com/ericfortis/web-tricks/main/${file}`)
				.then(res => res.text())
				.then(text => {
					targetEl.textContent = text
					hljs.highlightElement(targetEl)
					for (const span of targetEl.querySelectorAll('.hljs-keyword'))
						if (span.innerText === 'return' || span.innerText === 'throw')
							span.classList.add('hljs-return')
				})
				.catch(console.error)
		}


		function flashHighlightWhenScrollingToFragments() {
			const FLASH_BG_COLOR = '#77ffc4'
			let elPendingHighlightOff = null
			let highlightTimer = null

			if (location.hash) {
				const snippet = document.querySelector(location.hash)
				window.scrollTo(0, snippet.offsetTop)
				highlightSectionTitle(location.hash)
			}

			for (const anchor of document.querySelectorAll('a'))
				if (anchor.hash)
					anchor.addEventListener('click', highlightSectionTitle.bind(null, anchor.hash))

			function highlightSectionTitle(fragmentName) {
				try {
					const el = document.querySelector(fragmentName)
					if (elPendingHighlightOff || el === elPendingHighlightOff) {
						elPendingHighlightOff.style.background = ''
						clearTimeout(highlightTimer)
					}
					el.style.background = FLASH_BG_COLOR
					elPendingHighlightOff = el
					highlightTimer = setTimeout(function () {
						el.style.background = ''
						elPendingHighlightOff = null
					}, 2100)
				}
				catch (_) {
					setTimeout(function () {})
				}
			}
		}
	})
</script>
<script src="play-note.js"></script>
<script src="email-deobfuscator.js"></script>
<script src="pulse-on-change.js"></script>
<script crossorigin="anonymous" integrity="sha512-yUUc0qWm2rhM7X0EFe82LNnv2moqArj5nro/w1bi05A09hRVeIZbN6jlMoyu0+4I/Bu4Ck/85JQIU82T82M28w==" referrerpolicy="no-referrer" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
</body>
</html>
